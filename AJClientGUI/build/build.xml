<?xml version="1.0"?>
<!DOCTYPE project []>
<project name="aj_java_gui" default="create-jar" basedir="..">

   <!-- component directories ... -->
   <property name="gui.srcdir"      location="${basedir}/src"/>
   <property name="gui.compiledir"  location="${basedir}/classes"/>

   <!-- other path settings, some items to be customized locally ...  -->
   <property name="log4j-1.2.8.jar"            location="${basedir}/needed_jars/log4j-1.2.8.jar"/>
   <property name="skinlf.jar"            location="${basedir}/needed_jars/skinlf.jar"/>
   <property name="ajcorefassade.jar"            location="${basedir}/needed_jars/ajcorefassade.jar"/>
   <property name="tklcontrols.jar"            location="${basedir}/needed_jars/tklcontrols.jar"/>

   <!-- classpath for compilation ... -->
   <path id="lib.path">
      <pathelement location="${log4j-1.2.8.jar}"/>
      <pathelement location="${skinlf.jar}"/>
      <pathelement location="${ajcorefassade.jar}"/>
      <pathelement location="${tklcontrols.jar}"/>
   </path>

   <!-- remove class files, DavaDoc files and test results ... -->
   <target name="gui-clean" description="deletes class files">
      <delete includeEmptyDirs="true">
         <fileset dir="${gui.compiledir}" casesensitive="false">
            <include name="**/*.class"/>
            <exclude name="cvs"/>
            <exclude name="readme.txt"/>
            </fileset>
      </delete>
   </target>

   <target name="help"/>

   <target name="gui-compile" description="compiles the appleJuice-gui">
      <mkdir dir="${gui.compiledir}"/>
      <javac srcdir="${gui.srcdir}" destdir="${gui.compiledir}" debug="true">
         <classpath>
          <path refid="lib.path"/>
         </classpath>
      </javac>
   </target>

   <target name="gui-rebuild" depends="gui-clean, gui-compile" description="cleans and compiles the appleJuice-gui">
   </target>

   <target name="create-jar" depends="gui-compile" description="builds appleJuice-jar">
	  <jar destfile="${basedir}/AJCoreGUI.jar">
          <manifest>
              <attribute name="Built-by" value="${user.name}"/>
              <attribute name="Class-Path" value="./needed_jars/log4j-1.2.8.jar ./needed_jars/skinlf.jar ./needed_jars/looks-1.2.1.jar ./needed_jars/ajcorefassade.jar ./needed_jars/tklcontrols.jar"/>
             <attribute name="Main-Class" value="de.applejuicenet.client.AppleJuiceClient"/>
          </manifest>
		<fileset dir="${basedir}/classes" includes="**/de/**/*.* **/com/jeans/**/*.*"/>
      </jar>
   </target>

   <target name="build-archive" depends="create-jar" description="builds archive-zip">
	<jar destfile="${basedir}/AJCoreGUI_vX_XX.zip">
		<fileset dir="${basedir}" includes="AJCoreGUI.jar"/>
		<fileset dir="${basedir}" includes="AJCoreGUI.exe"/>
		<fileset dir="${basedir}" includes="wizard.xml"/>
		<fileset dir="${basedir}" includes="changelog.htm"/>
		<fileset dir="${basedir}" includes="TrayIcon12.dll"/>
		<fileset dir="${basedir}" includes="language/*.xml language/*.gif"/>
		<fileset dir="${basedir}" includes="icons/*.gif icons/*.properties"/>
		<fileset dir="${basedir}" includes="plugins/*.jar plugins/*.gif plugins/*.txt"/>
		<fileset dir="${basedir}" includes="pwdlpolicies/*.jar pwdlpolicies/*.txt"/>
		<fileset dir="${basedir}" includes="themes/*.zip themes/*.first"/>
		<fileset dir="${basedir}" includes="sounds/*.wav sounds/*.first"/>
		<fileset dir="${basedir}" includes="needed_jars/*.jar" excludes="needed_jars/junit.jar"/>
         </jar>
   </target>

   <target name="build-pluginjar-versionchecker" description="builds versionchecker.jar">
      <delete includeEmptyDirs="true">
         <fileset dir="${basedir}/plugins" casesensitive="false">
            <include name="**/versionchecker.jar"/>
         </fileset>
      </delete>
	  <jar destfile="${basedir}/plugins/versionchecker.jar">
		<fileset dir="${basedir}/plugin_src/versionchecker" includes="*.xml"/>
		<fileset dir="${basedir}/classes" includes="**/de/applejuicenet/client/gui/plugins/**/*.*"
                excludes="**/de/applejuicenet/client/gui/plugins/PluginConnector.class" />
      </jar>
	  <jar destfile="${basedir}/plugins/versionchecker.zip">
		<fileset dir="${basedir}/plugins/" includes="versionchecker.jar"/>
<!--		<fileset dir="${basedir}/plugin_src/versionchecker/icons/" includes="*.gif"/>-->
      </jar>
   </target>

   <target name="build-pluginjar-ircplugin" description="builds ircplugin.jar">
      <delete includeEmptyDirs="true">
         <fileset dir="${basedir}/plugins" casesensitive="false">
            <include name="**/ircplugin.jar"/>
         </fileset>
      </delete>
	  <jar destfile="${basedir}/plugins/ircplugin.jar">
		<fileset dir="${basedir}/plugin_src/ircplugin" includes="*.xml"/>
		<fileset dir="${basedir}/classes" includes="**/de/applejuicenet/client/gui/plugins/**/*.*"
                excludes="**/de/applejuicenet/client/gui/plugins/PluginConnector.class" />
      </jar>
	  <jar destfile="${basedir}/plugins/ircplugin.jar">
		<fileset dir="${basedir}/plugins/" includes="ircplugin.jar.jar"/>
      </jar>
   </target>
	
   <target name="build-pwdlPolicy-jar" description="builds pwdlPolicy - build.xml needs to be modified">
      <delete includeEmptyDirs="true">
         <fileset dir="${basedir}/pwdlpolicies" casesensitive="false">
            <include name="**/StandardPwdlPolicy.jar"/>
         </fileset>
      </delete>
	<jar destfile="${basedir}/pwdlpolicies/StandardPwdlPolicy.jar">
		<fileset dir="${basedir}/classes" 
			includes="**/de/applejuicenet/client/gui/powerdownload/**/*.*" 
			excludes="**/de/applejuicenet/client/gui/powerdownload/AutomaticPowerdownloadPolicy.class test/**" />
         </jar>
   </target>

   <target name="cruisecontrol" description="target for cruisecontrol">
      <cvs dest="${basedir}" command="update -d -P"/>
      <antcall target="gui-rebuild"/>
   </target>

   <target name="complete" depends="create-jar" description="builds complete appleJuice">
   </target>
</project>
